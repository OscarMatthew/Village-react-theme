{"ast":null,"code":"import n, { useRef as e, useEffect as t, cloneElement as o } from \"react\";\n\nfunction r(n, e, t) {\n  return e in n ? Object.defineProperty(n, e, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : n[e] = t, n;\n}\n\nvar u = {\n  click: \"onClick\",\n  focusin: \"onFocus\",\n  focusout: \"onFocus\",\n  mousedown: \"onMouseDown\",\n  mouseup: \"onMouseUp\",\n  touchstart: \"onTouchStart\",\n  touchend: \"onTouchEnd\"\n},\n    c = function (c) {\n  var i,\n      a = c.children,\n      d = c.onClickAway,\n      s = c.focusEvent,\n      v = void 0 === s ? \"focusin\" : s,\n      f = c.mouseEvent,\n      l = void 0 === f ? \"click\" : f,\n      m = c.touchEvent,\n      E = void 0 === m ? \"touchend\" : m,\n      p = e(null),\n      h = e(null),\n      L = e(!1);\n  t(function () {\n    return setTimeout(function () {\n      L.current = !0;\n    }, 0), function () {\n      L.current = !1;\n    };\n  }, []);\n\n  var y = function (n) {\n    return function (e) {\n      h.current = e.target;\n      var t = null == a ? void 0 : a.props[n];\n      t && t(e);\n    };\n  };\n\n  t(function () {\n    var n = function (n) {\n      L.current && (p.current && p.current.contains(n.target) || h.current === n.target || !document.contains(n.target) || d(n));\n    };\n\n    return document.addEventListener(l, n), document.addEventListener(E, n), document.addEventListener(v, n), function () {\n      document.removeEventListener(l, n), document.removeEventListener(E, n), document.removeEventListener(v, n);\n    };\n  }, [v, l, d, E]);\n  var g = u[l],\n      k = u[E],\n      w = u[v];\n  return n.Children.only(o(a, (r(i = {\n    ref: function (n) {\n      p.current = n;\n      var e = a.ref;\n      \"function\" == typeof e ? e(n) : e && (e.current = n);\n    }\n  }, w, y(w)), r(i, g, y(g)), r(i, k, y(k)), i)));\n};\n\nc.displayName = \"ClickAwayListener\";\nexport default c;","map":{"version":3,"mappings":"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","names":["eventTypeMapping","click","focusin","focusout","mousedown","mouseup","touchstart","touchend","ClickAwayListener","children","onClickAway","focusEvent","s","f","mouseEvent","m","touchEvent","node","useRef","bubbledEventTarget","mountedRef","useEffect","setTimeout","current","handleBubbledEvents","type","event","target","handler","props","handleEvents","contains","document","addEventListener","removeEventListener","mappedMouseEvent","mappedTouchEvent","mappedFocusEvent","React","Children","only","cloneElement","ref","childRef","displayName"],"sources":["/Users/soladev/Desktop/react-solasite/node_modules/react-click-away-listener/src/index.tsx"],"sourcesContent":["import React, {\n\tuseRef,\n\tuseEffect,\n\tRefCallback,\n\tcloneElement,\n\tReactElement,\n\tHTMLAttributes,\n\tMutableRefObject,\n\tFunctionComponent\n} from 'react';\n\ntype FocusEvents = 'focusin' | 'focusout';\ntype MouseEvents = 'click' | 'mousedown' | 'mouseup';\ntype TouchEvents = 'touchstart' | 'touchend';\ntype Events = FocusEvent | MouseEvent | TouchEvent;\n\ninterface Props extends HTMLAttributes<HTMLElement> {\n\tonClickAway: (event: Events) => void;\n\tfocusEvent?: FocusEvents;\n\tmouseEvent?: MouseEvents;\n\ttouchEvent?: TouchEvents;\n\tchildren: ReactElement<any>;\n}\n\nconst eventTypeMapping = {\n\tclick: 'onClick',\n\tfocusin: 'onFocus',\n\tfocusout: 'onFocus',\n\tmousedown: 'onMouseDown',\n\tmouseup: 'onMouseUp',\n\ttouchstart: 'onTouchStart',\n\ttouchend: 'onTouchEnd'\n};\n\nconst ClickAwayListener: FunctionComponent<Props> = ({\n\tchildren,\n\tonClickAway,\n\tfocusEvent = 'focusin',\n\tmouseEvent = 'click',\n\ttouchEvent = 'touchend'\n}) => {\n\tconst node = useRef<HTMLElement | null>(null);\n\tconst bubbledEventTarget = useRef<EventTarget | null>(null);\n\tconst mountedRef = useRef(false);\n\n\t/**\n\t * Prevents the bubbled event from getting triggered immediately\n\t * https://github.com/facebook/react/issues/20074\n\t */\n\tuseEffect(() => {\n\t\tsetTimeout(() => {\n\t\t\tmountedRef.current = true;\n\t\t}, 0);\n\n\t\treturn () => {\n\t\t\tmountedRef.current = false;\n\t\t};\n\t}, []);\n\n\tconst handleBubbledEvents =\n\t\t(type: string) =>\n\t\t(event: Events): void => {\n\t\t\tbubbledEventTarget.current = event.target;\n\n\t\t\tconst handler = children?.props[type];\n\n\t\t\tif (handler) {\n\t\t\t\thandler(event);\n\t\t\t}\n\t\t};\n\n\tconst handleChildRef = (childRef: HTMLElement) => {\n\t\tnode.current = childRef;\n\n\t\tlet { ref } = children as typeof children & {\n\t\t\tref: RefCallback<HTMLElement> | MutableRefObject<HTMLElement>;\n\t\t};\n\n\t\tif (typeof ref === 'function') {\n\t\t\tref(childRef);\n\t\t} else if (ref) {\n\t\t\tref.current = childRef;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tconst handleEvents = (event: Events): void => {\n\t\t\tif (!mountedRef.current) return;\n\n\t\t\tif (\n\t\t\t\t(node.current && node.current.contains(event.target as Node)) ||\n\t\t\t\tbubbledEventTarget.current === event.target ||\n\t\t\t\t!document.contains(event.target as Node)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tonClickAway(event);\n\t\t};\n\n\t\tdocument.addEventListener(mouseEvent, handleEvents);\n\t\tdocument.addEventListener(touchEvent, handleEvents);\n\t\tdocument.addEventListener(focusEvent, handleEvents);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(mouseEvent, handleEvents);\n\t\t\tdocument.removeEventListener(touchEvent, handleEvents);\n\t\t\tdocument.removeEventListener(focusEvent, handleEvents);\n\t\t};\n\t}, [focusEvent, mouseEvent, onClickAway, touchEvent]);\n\n\tconst mappedMouseEvent = eventTypeMapping[mouseEvent];\n\tconst mappedTouchEvent = eventTypeMapping[touchEvent];\n\tconst mappedFocusEvent = eventTypeMapping[focusEvent];\n\n\treturn React.Children.only(\n\t\tcloneElement(children as ReactElement<any>, {\n\t\t\tref: handleChildRef,\n\t\t\t[mappedFocusEvent]: handleBubbledEvents(mappedFocusEvent),\n\t\t\t[mappedMouseEvent]: handleBubbledEvents(mappedMouseEvent),\n\t\t\t[mappedTouchEvent]: handleBubbledEvents(mappedTouchEvent)\n\t\t})\n\t);\n};\n\nClickAwayListener.displayName = 'ClickAwayListener';\n\nexport default ClickAwayListener;\n"]},"metadata":{},"sourceType":"module"}